% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est_twosample.R

\name{est_twosample}
\alias{est_twosample}
\title{Sample Size Estimation for Two Independent Proportions}
\usage{
est_twosample(p1, p2, delta, r, alpha = 0.05, assurance = 0.8, rep)
}
\arguments{
  \item{p1}{Numeric. True proportion in group 1 (e.g., experimental group).}

  \item{p2}{Numeric. True proportion in group 2 (e.g., control group).}

  \item{delta}{Numeric. The specified threshold for the lower limit of the confidence interval for \code{p1 - p2}.}

  \item{r}{Numeric. Sample size allocation ratio (\code{n1 / n2}) between group 1 and group 2.}

  \item{alpha}{Numeric. Significance level for the two-sided confidence interval. Default is 0.05.}

  \item{assurance}{Numeric. Desired assurance probability (e.g., 0.8 for 80\% assurance).}

  \item{rep}{Integer. Number of simulation replications for evaluating assurance and coverage probabilities.}
}
\value{
  A data frame with the following columns:
  \describe{
    \item{\code{n1_w, n2_w}}{Required sample sizes for group 1 and group 2 using the Wald method.}
    \item{\code{n1_s, n2_s}}{Required sample sizes for group 1 and group 2 using the Wilson score method.}
    \item{\code{EAPw}}{Empirical assurance probability (lower limit \(\geq\) \code{delta}) using the Wald method (percentage).}
    \item{\code{ECPw}}{Empirical coverage probability (true difference within CI) using the Wald method (percentage).}
    \item{\code{EAPs}}{Empirical assurance probability using the Wilson score method (percentage).}
    \item{\code{ECPs}}{Empirical coverage probability using the Wilson score method (percentage).}
  }
}
\description{
  This function estimates the required sample sizes for comparing two independent proportions
  based on the Wald and Wilson score methods. It evaluates sample size performance
  using simulations to calculate empirical assurance probabilities and coverage probabilities.
}
\details{
  The function calculates the required sample sizes to ensure that the lower limit of a
  two-sided confidence interval for the difference in proportions (\code{p1 - p2}) is no less
  than the specified threshold (\code{delta}) with the desired assurance probability (\code{1 - beta}).

  \strong{Key Features:}
  \itemize{
    \item The Wald method uses a standard normal approximation for the confidence interval.
    \item The Wilson score method solves the sample size equation numerically using the
          \code{uniroot} function for improved accuracy, particularly in small sample sizes
          or extreme proportions.
    \item Simulations evaluate the empirical assurance and coverage probabilities of the
          calculated sample sizes.
  }

  Parallel computing is utilized to enhance performance for large simulation replications (\code{rep}).
}
\note{
  \itemize{
    \item For extreme proportions (close to 0 or 1), the Wilson score method
          is generally more reliable than the Wald method.
    \item Ensure sufficient computational resources are available for large \code{rep} values
          as parallel computing is used to improve performance.
  }
}
\examples{
  # Example 1: Ensuring the lower limit of the 95\% CI for (p1 - p2)
  # is no less than \eqn{\delta = -0.06} with 80\% assurance and equal group sizes (r = 1)
  result <- est_twosample(p1 = 0.97, p2 = 0.98, delta = -0.06, r = 1,
                          alpha = 0.05, assurance = 0.97, rep = 10000)
  print(result)

  # Example 2: Ensuring the lower limit of the 95\% CI for (p1 - p2)
  # is no less than \eqn{\delta = -0.06} with 80\% assurance and a group size ratio of r = 2
  result <- est_twosample(p1 = 0.97, p2 = 0.98, delta = -0.06, r = 2,
                          alpha = 0.05, assurance = 0.97, rep = 10000)
  print(result)
}
